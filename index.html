<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJC Group of Company</title>
    <style>
        /* Global Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            color: green;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            overflow-x: hidden;
            padding-left: 10px;
            padding-right: 10px;
        }

        header {
            background-color: #333;
            color: #fff;
            padding: 10px 0;
            text-align: center;
            margin: 0;
            box-sizing: border-box;
        }

        nav {
            background-color: #666;
            padding: 10px 0;
            text-align: center;
            margin: 0;
            box-sizing: border-box;
        }

        nav a {
            color: #fff;
            text-decoration: none;
            padding: 0 20px;
            display: inline-block;
        }

        section {
            padding: 20px;
            flex-grow: 1;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            margin: 10px 0;
            box-sizing: border-box;
        }

        footer {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 20px 0;
            margin: 0;
            box-sizing: border-box;
        }

        .order-form, .feedback-form, .about-section {
            max-width: 100%;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
        }

        .order-form label, .feedback-form label, .about-section h2 {
            display: block;
            margin-bottom: 10px;
        }

        .order-form input[type="text"],
        .order-form input[type="email"],
        .order-form textarea,
        .order-form select,
        .order-form input[type="number"],
        .feedback-form input[type="text"],
        .feedback-form input[type="email"],
        .feedback-form textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }

        .order-form input[type="submit"],
        .feedback-form input[type="submit"] {
            background-color: #4CAF50;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
        }

        .order-form input[type="submit"]:hover,
        .feedback-form input[type="submit"]:hover {
            background-color: #45a049;
        }

        .order-form .total {
            margin-top: 15px;
            font-weight: bold;
        }

        .product-image {
            max-width: 200px;
            margin-top: 10px;
        }

        .fade-in {
            opacity: 1 !important;
        }

        .price-list {
            background-color: #fff;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .price-list h2 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }

        .price-list h3 {
            color: #666;
            margin: 10px 0;
            padding: 5px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }

        .about-section img {
            max-width: 100%;
            height: auto;
            margin: 10px 5px;
            border-radius: 5px;
        }

        .admin-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        .admin-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 90%;
            width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .admin-login {
            text-align: center;
        }

        .admin-login input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }

        .admin-btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        .admin-btn:hover {
            background-color: #45a049;
        }

        .admin-btn.close {
            background-color: #f44336;
            float: right;
        }

        .admin-btn.close:hover {
            background-color: #d32f2f;
        }

        .admin-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .admin-btn.secondary {
            background-color: #008CBA;
        }

        .admin-btn.secondary:hover {
            background-color: #007aa3;
        }

        .price-edit {
            margin: 10px 0;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }

        .price-edit label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .price-edit input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .admin-header {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .admin-floating-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #666;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .admin-floating-btn:hover {
            background-color: #555;
        }

        .admin-menu {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .password-change {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f5e8;
            border-radius: 5px;
        }

        .status-box {
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }

        .status-success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .status-error {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .status-info {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #4CAF50;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Order Management Styles */
        .order-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .order-table th,
        .order-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
            font-size: 12px;
        }

        .order-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }

        .order-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .chart-container {
            margin: 20px 0;
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .filter-container {
            margin: 15px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }

        .filter-container select,
        .filter-container input {
            margin: 5px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
        }

        .stat-label {
            color: #666;
            font-size: 12px;
            margin-top: 5px;
        }

        .firebase-status {
            position: fixed;
            bottom: 90px;
            right: 20px;
            background: #4CAF50;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .firebase-status.show {
            opacity: 1;
        }

        .firebase-status.error {
            background: #f44336;
        }

        /* Responsive Design for Mobile Screens */
        @media only screen and (max-width: 600px) {
            body, section, .order-form, .feedback-form {
                width: 100%;
                margin: 0;
                padding: 0;
                padding-left: 10px;
                padding-right: 10px;
            }

            .admin-content {
                width: 95%;
                padding: 15px;
            }

            .admin-menu {
                flex-direction: column;
            }

            .admin-btn {
                margin: 2px;
                padding: 8px 12px;
                font-size: 12px;
            }

            .order-table th,
            .order-table td {
                font-size: 10px;
                padding: 4px;
            }

            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }

            nav a {
                display: block;
                padding: 10px;
                font-size: 14px;
            }

            .order-form, .feedback-form {
                padding: 10px;
            }

            footer {
                position: relative;
            }

            .about-section h2,
            .about-section h3 {
                font-size: 16px;
            }

            .about-section p, .about-section h4 {
                font-size: 14px;
            }

            .product-image {
                max-width: 100%;
                height: auto;
            }

            .order-form input[type="submit"],
            .feedback-form input[type="submit"] {
                width: 100%;
            }

            .order-form input[type="text"],
            .order-form input[type="email"],
            .order-form select,
            .order-form input[type="number"],
            .feedback-form input[type="text"],
            .feedback-form input[type="email"],
            .feedback-form textarea {
                font-size: 16px;
            }

            .about-section img {
                width: 100%;
                height: auto;
                margin: 10px 0;
            }
        }
    </style>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>

const firebaseConfig = {
  apiKey: "AIzaSyAwI4RtAEtKgTyXdzY0dW3P81I-sWybXr4",
  authDomain: "ajcweb-4ab7c.firebaseapp.com",
  projectId: "ajcweb-4ab7c",
  storageBucket: "ajcweb-4ab7c.firebasestorage.app",
  messagingSenderId: "399193474584",
  appId: "1:399193474584:web:22683dbb853946a4f0a56d",
  measurementId: "G-BRD1DPJ662"
};


        // Initialize Firebase
        let firebaseInitialized = false;
        let database = null;

        function initializeFirebase() {
            try {
                if (!firebaseInitialized && firebaseConfig.apiKey !== "AIzaSyAwI4RtAEtKgTyXdzY0dW3P81I-sWybXr4") {
                    firebase.initializeApp(firebaseConfig);
                    database = firebase.database();
                    firebaseInitialized = true;
                    showFirebaseStatus("Connected to Firebase", false);
                    console.log("Firebase initialized successfully");
                    return true;
                }
            } catch (error) {
                console.error("Firebase initialization failed:", error);
                showFirebaseStatus("Firebase connection failed", true);
                return false;
            }
            return false;
        }

        function showFirebaseStatus(message, isError) {
            const statusElement = document.getElementById('firebaseStatus');
            statusElement.textContent = message;
            statusElement.className = `firebase-status show ${isError ? 'error' : ''}`;
            
            setTimeout(() => {
                statusElement.classList.remove('show');
            }, 3000);
        }

        function fadeInOnScroll() {
            const sections = document.querySelectorAll("section");
            const windowHeight = window.innerHeight;

            sections.forEach(section => {
                const sectionTop = section.getBoundingClientRect().top;
                if (sectionTop <= windowHeight * 0.8) {
                    section.classList.add("fade-in");
                }
            });
        }

        window.addEventListener("scroll", fadeInOnScroll);
        window.onload = fadeInOnScroll;

        // EDIT PRICES HERE
        let prices = {
            "chilly": 2,
            "tomato": 5,
            "spinach": 10,
            "ladies_finger": 2,
            "cabbage": 50,
            "capsicum": 20,
            "cauliflower": 50
        };

        // ADMIN PASSWORD
        let adminPassword = 'ajc2025';

        let productImages = {
            "chilly": "static/images/chilly.jpg",
            "tomato": "static/images/tomato.jpg",
            "spinach": "static/images/spinach.jpg",
            "ladies_finger": "static/images/ladisfing.jpg",
            "cabbage": "static/images/cabbage.jpg",
            "capsicum": "static/images/capsicum.jpg",
            "cauliflower": "static/images/cauliflower.jpg"
        };

        let isAdminLoggedIn = false;
        let currentAdminView = 'prices';

        // Order Management System
        let orderData = [];
        let orderCounter = 1;

        // Firebase Order Functions
        async function initializeOrderData() {
            if (firebaseInitialized && database) {
                try {
                    // Listen for real-time updates
                    database.ref('orders').on('value', (snapshot) => {
                        const data = snapshot.val();
                        if (data) {
                            orderData = Object.values(data);
                            console.log(`Loaded ${orderData.length} orders from Firebase`);
                            if (currentAdminView === 'orders') {
                                displayOrders();
                            }
                        } else {
                            orderData = [];
                        }
                    });

                    // Get order counter
                    database.ref('settings/orderCounter').once('value', (snapshot) => {
                        const counter = snapshot.val();
                        if (counter) {
                            orderCounter = counter;
                        }
                    });

                    showFirebaseStatus("Orders synced", false);
                } catch (error) {
                    console.error('Failed to load from Firebase:', error);
                    showFirebaseStatus("Sync failed", true);
                    // Fallback to localStorage
                    loadFromLocalStorage();
                }
            } else {
                // Fallback to localStorage when Firebase is not configured
                loadFromLocalStorage();
            }
        }

        function loadFromLocalStorage() {
            const localOrders = localStorage.getItem('ajc_orders');
            const localCounter = localStorage.getItem('ajc_order_counter');
            
            if (localOrders) {
                orderData = JSON.parse(localOrders);
            }
            if (localCounter) {
                orderCounter = parseInt(localCounter);
            }
        }

        async function saveOrderData() {
            // Always save to localStorage as backup
            localStorage.setItem('ajc_orders', JSON.stringify(orderData));
            localStorage.setItem('ajc_order_counter', orderCounter.toString());

            // Save to Firebase if available
            if (firebaseInitialized && database) {
                try {
                    // Save all orders
                    const ordersRef = database.ref('orders');
                    const ordersObj = {};
                    orderData.forEach(order => {
                        ordersObj[order.orderNumber] = order;
                    });
                    await ordersRef.set(ordersObj);
                    
                    // Save order counter
                    await database.ref('settings/orderCounter').set(orderCounter);
                    
                    showFirebaseStatus("Orders saved", false);
                    console.log('Orders saved to Firebase successfully');
                } catch (error) {
                    console.error('Failed to save to Firebase:', error);
                    showFirebaseStatus("Save failed", true);
                }
            }
        }

        function updateProductList() {
            for (let i = 1; i <= 5; i++) {
                const productSelect = document.getElementById("product" + i);
                if (productSelect) {
                    productSelect.innerHTML = '';

                    const defaultOption = document.createElement("option");
                    defaultOption.value = "";
                    defaultOption.text = "Select Product";
                    productSelect.appendChild(defaultOption);

                    for (let item in prices) {
                        const option = document.createElement("option");
                        option.value = item;
                        option.text = item.replace(/_/g, ' ') + " (" + prices[item] + " Rs)";
                        option.setAttribute('data-price', prices[item]);
                        productSelect.appendChild(option);
                    }
                }
            }
        }

        function updateProductImage(i) {
            const product = document.getElementById("product" + i).value;
            const imageElement = document.getElementById("productImage" + i);

            if (product && productImages[product]) {
                imageElement.src = productImages[product];
                imageElement.style.display = 'block';
            } else {
                imageElement.style.display = 'none';
            }
            calculateTotal();
        }

        function calculateTotal() {
            let total = 0;
            const itemCount = document.getElementById("itemCount").value;
            for (let i = 1; i <= itemCount; i++) {
                const product = document.getElementById("product" + i).value;
                const quantity = parseInt(document.getElementById("quantity" + i).value) || 0;
                if (product && quantity > 0) {
                    total += prices[product] * quantity;
                }
            }
            document.getElementById("totalCost").innerText = "Total Cost: Rs " + total;
        }

        function sendEmail() {
            const name = document.getElementById("name").value.trim();
            const email = document.getElementById("email").value.trim();

            if (!name || !email) {
                alert("Please fill in all required fields");
                return false;
            }

            let body = "Name: " + name + "%0D%0AEmail: " + email + "%0D%0A%0D%0A";
            const itemCount = document.getElementById("itemCount").value;
            let totalAmount = 0;
            let hasProducts = false;
            let orderItems = [];

            for (let i = 1; i <= itemCount; i++) {
                const product = document.getElementById("product" + i).value;
                const quantity = parseInt(document.getElementById("quantity" + i).value) || 0;
                if (product && quantity > 0) {
                    hasProducts = true;
                    const total = prices[product] * quantity;
                    body += "Product " + i + ": " + product.replace(/_/g, ' ') + "%0D%0AQuantity: " + quantity + "%0D%0ATotal Cost: Rs " + total + "%0D%0A%0D%0A";
                    totalAmount += total;
                    
                    orderItems.push({
                        product: product.replace(/_/g, ' '),
                        quantity: quantity,
                        price: prices[product],
                        total: total
                    });
                }
            }

            if (!hasProducts) {
                alert("Please select at least one product with quantity");
                return false;
            }

            body += "Net Amount: Rs " + totalAmount;

            // Store order data
            const orderRecord = {
                orderNumber: orderCounter++,
                date: new Date().toISOString(),
                customerName: name,
                customerEmail: email,
                items: orderItems,
                totalAmount: totalAmount
            };

            orderData.push(orderRecord);
            saveOrderData();

            const subject = "Order from " + name;
            const mailtoLink = "mailto:ajcgroupofcompany41@gmail.com?subject=" + encodeURIComponent(subject) + "&body=" + body;

            setTimeout(function() {
                window.location.href = mailtoLink;
            }, 100);

            return false;
        }

        function sendFeedbackEmail() {
            const name = document.getElementById("feedbackName").value.trim();
            const email = document.getElementById("feedbackEmail").value.trim();
            const feedback = document.getElementById("feedbackMessage").value.trim();
            const senderGmail = document.getElementById("senderGmail").value.trim();

            if (!name || !email || !feedback || !senderGmail) {
                alert("Please fill in all required fields");
                return false;
            }

            let body = "Name: " + name + "%0D%0AEmail: " + email + "%0D%0ASender Gmail: " + senderGmail + "%0D%0A%0D%0AFeedback: " + feedback;

            const subject = "Feedback from " + name;
            const mailtoLink = "mailto:antonyasher71@gmail.com?subject=" + encodeURIComponent(subject) + "&body=" + body;

            setTimeout(function() {
                window.location.href = mailtoLink;
            }, 100);

            return false;
        }

        function showProductFields() {
            const itemCount = document.getElementById("itemCount").value;
            for (let i = 1; i <= 5; i++) {
                const fieldset = document.getElementById("productFieldset" + i);
                if (fieldset) {
                    fieldset.style.display = i <= itemCount ? 'block' : 'none';
                }
            }
            calculateTotal();
        }

        function updatePriceList() {
            const priceListDiv = document.querySelector('.price-list');
            if (priceListDiv) {
                const productNames = {
                    "chilly": "Chilly",
                    "tomato": "Tomato",
                    "spinach": "Spinach",
                    "ladies_finger": "Ladies finger",
                    "cabbage": "Cabbage",
                    "capsicum": "Capsicum",
                    "cauliflower": "Cauliflower"
                };

                let html = '<h2>PRICE LIST AND QUANTITY</h2>';
                for (let item in prices) {
                    if (productNames[item]) {
                        let unit = item === 'chilly' ? '/2g' : '/per piece';
                        html += `<h3>${productNames[item]} = ${prices[item]}rs${unit}</h3>`;
                    }
                }
                priceListDiv.innerHTML = html;
            }
        }

        function showAdminPanel() {
            document.getElementById('adminPanel').style.display = 'block';
            if (!isAdminLoggedIn) {
                showAdminLogin();
            } else {
                showAdminDashboard();
            }
        }

        function hideAdminPanel() {
            document.getElementById('adminPanel').style.display = 'none';
            isAdminLoggedIn = false;
        }

        function showAdminLogin() {
            const adminContent = document.getElementById('adminContent');
            adminContent.innerHTML = `
                <button class="admin-btn close" onclick="hideAdminPanel()">×</button>
                <div class="admin-login">
                    <h2 class="admin-header">Admin Login</h2>
                    ${!firebaseInitialized ? 
                        '<div class="status-box status-info">Note: Firebase not configured. Using local storage only.</div>' : 
                        '<div class="status-box status-success">✅ Firebase connected - Real-time sync enabled</div>'
                    }
                    <input type="password" id="adminPasswordInput" placeholder="Enter Admin Password" />
                    <button class="admin-btn" onclick="adminLogin()">Login</button>
                    <p id="loginError" style="color: red; display: none;">Incorrect password!</p>
                </div>
            `;
        }

        function adminLogin() {
            const inputPassword = document.getElementById('adminPasswordInput').value;
            if (inputPassword === adminPassword) {
                isAdminLoggedIn = true;
                showAdminDashboard();
            } else {
                document.getElementById('loginError').style.display = 'block';
            }
        }

        function showAdminDashboard() {
            switch(currentAdminView) {
                case 'orders':
                    showOrderManagement();
                    break;
                case 'analytics':
                    showAnalytics();
                    break;
                case 'prices':
                default:
                    showPriceEditor();
                    break;
            }
        }

        function showPriceEditor() {
            currentAdminView = 'prices';
            const adminContent = document.getElementById('adminContent');
            let html = `
                <button class="admin-btn close" onclick="hideAdminPanel()">×</button>
                <div class="admin-menu">
                    <button class="admin-btn secondary" onclick="currentAdminView='prices'; showAdminDashboard()">Price Management</button>
                    <button class="admin-btn" onclick="currentAdminView='orders'; showAdminDashboard()">Order Management</button>
                    <button class="admin-btn" onclick="currentAdminView='analytics'; showAdminDashboard()">Analytics</button>
                </div>
                <h2 class="admin-header">Price Management</h2>
                ${!firebaseInitialized ? 
                    '<div class="status-box status-info">Prices will be saved locally only. Configure Firebase for sync across devices.</div>' : 
                    '<div class="status-box status-success">✅ Firebase connected - Changes will sync across all devices</div>'
                }
            `;

            const productNames = {
                "chilly": "Chilly (Rs/2g)",
                "tomato": "Tomato (Rs/per piece)",
                "spinach": "Spinach (Rs/per piece)",
                "ladies_finger": "Ladies finger (Rs/per piece)",
                "cabbage": "Cabbage (Rs/per piece)",
                "capsicum": "Capsicum (Rs/per piece)",
                "cauliflower": "Cauliflower (Rs/per piece)"
            };

            for (let item in prices) {
                html += `
                    <div class="price-edit">
                        <label>${productNames[item]}:</label>
                        <input type="number" id="price_${item}" value="${prices[item]}" min="0" step="0.01" />
                    </div>
                `;
            }

            html += `
                <button class="admin-btn" id="savePricesBtn" onclick="savePrices()">Update Prices</button>
                <div id="updateStatus" style="margin-top: 15px;"></div>

                <div class="password-change">
                    <h3>Change Admin Password</h3>
                    <input type="password" id="currentPassword" placeholder="Current Password" />
                    <input type="password" id="newPassword" placeholder="New Password" />
                    <input type="password" id="confirmPassword" placeholder="Confirm New Password" />
                    <button class="admin-btn" onclick="changePassword()">Change Password</button>
                    <p id="passwordError" style="color: red; display: none;"></p>
                    <p id="passwordSuccess" style="color: green; display: none;"></p>
                </div>
            `;

            adminContent.innerHTML = html;
        }

        function showOrderManagement() {
            currentAdminView = 'orders';
            const adminContent = document.getElementById('adminContent');
            
            let html = `
                <button class="admin-btn close" onclick="hideAdminPanel()">×</button>
                <div class="admin-menu">
                    <button class="admin-btn" onclick="currentAdminView='prices'; showAdminDashboard()">Price Management</button>
                    <button class="admin-btn secondary" onclick="currentAdminView='orders'; showAdminDashboard()">Order Management</button>
                    <button class="admin-btn" onclick="currentAdminView='analytics'; showAdminDashboard()">Analytics</button>
                </div>
                <h2 class="admin-header">Order Management</h2>
                ${!firebaseInitialized ? 
                    '<div class="status-box status-error">⚠️ Firebase not configured. Orders visible on this device only.</div>' : 
                    '<div class="status-box status-success">✅ Real-time sync enabled - Orders visible on all devices</div>'
                }
                
                <div class="filter-container">
                    <label>Filter by Date Range:</label>
                    <input type="date" id="startDate" onchange="filterOrders()">
                    <input type="date" id="endDate" onchange="filterOrders()">
                    <select id="monthFilter" onchange="filterOrders()">
                        <option value="">All Months</option>
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <select id="yearFilter" onchange="filterOrders()">
                        <option value="">All Years</option>
                    </select>
                    <button class="admin-btn" onclick="clearOrderData()">Clear All Orders</button>
                </div>

                <div id="orderStats" class="stats-grid">
                </div>

                <div id="orderTableContainer">
                    <table class="order-table" id="orderTable">
                        <thead>
                            <tr>
                                <th>Order #</th>
                                <th>Date</th>
                                <th>Customer</th>
                                <th>Email</th>
                                <th>Items</th>
                                <th>Amount (Rs)</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="orderTableBody">
                        </tbody>
                    </table>
                </div>
            `;

            adminContent.innerHTML = html;
            populateYearFilter();
            displayOrders();
        }

        function showAnalytics() {
            currentAdminView = 'analytics';
            const adminContent = document.getElementById('adminContent');
            
            let html = `
                <button class="admin-btn close" onclick="hideAdminPanel()">×</button>
                <div class="admin-menu">
                    <button class="admin-btn" onclick="currentAdminView='prices'; showAdminDashboard()">Price Management</button>
                    <button class="admin-btn" onclick="currentAdminView='orders'; showAdminDashboard()">Order Management</button>
                    <button class="admin-btn secondary" onclick="currentAdminView='analytics'; showAdminDashboard()">Analytics</button>
                </div>
                <h2 class="admin-header">Sales Analytics</h2>
                
                <div class="filter-container">
                    <label>View:</label>
                    <select id="analyticsView" onchange="updateAnalytics()">
                        <option value="monthly">Monthly</option>
                        <option value="yearly">Yearly</option>
                    </select>
                    <select id="analyticsYear" onchange="updateAnalytics()">
                        <option value="">All Years</option>
                    </select>
                </div>

                <div id="analyticsStats" class="stats-grid">
                </div>

                <div class="chart-container">
                    <canvas id="salesChart" width="400" height="200"></canvas>
                </div>

                <div class="chart-container">
                    <canvas id="productChart" width="400" height="200"></canvas>
                </div>
            `;

            adminContent.innerHTML = html;
            populateAnalyticsYearFilter();
            updateAnalytics();
        }

        function populateYearFilter() {
            const yearFilter = document.getElementById('yearFilter');
            const years = [...new Set(orderData.map(order => new Date(order.date).getFullYear()))].sort().reverse();
            
            yearFilter.innerHTML = '<option value="">All Years</option>';
            years.forEach(year => {
                yearFilter.innerHTML += `<option value="${year}">${year}</option>`;
            });
        }

        function populateAnalyticsYearFilter() {
            const yearFilter = document.getElementById('analyticsYear');
            const years = [...new Set(orderData.map(order => new Date(order.date).getFullYear()))].sort().reverse();
            
            yearFilter.innerHTML = '<option value="">All Years</option>';
            years.forEach(year => {
                yearFilter.innerHTML += `<option value="${year}">${year}</option>`;
            });
        }

        function filterOrders() {
            displayOrders();
        }

        function getFilteredOrders() {
            const startDate = document.getElementById('startDate')?.value;
            const endDate = document.getElementById('endDate')?.value;
            const monthFilter = document.getElementById('monthFilter')?.value;
            const yearFilter = document.getElementById('yearFilter')?.value;

            return orderData.filter(order => {
                const orderDate = new Date(order.date);
                
                if (startDate && orderDate < new Date(startDate)) return false;
                if (endDate && orderDate > new Date(endDate)) return false;
                if (monthFilter && (orderDate.getMonth() + 1) != monthFilter) return false;
                if (yearFilter && orderDate.getFullYear() != yearFilter) return false;
                
                return true;
            });
        }

        function displayOrders() {
            const filteredOrders = getFilteredOrders();
            const tbody = document.getElementById('orderTableBody');
            
            if (!tbody) return;

            tbody.innerHTML = '';
            
            filteredOrders.sort((a, b) => new Date(b.date) - new Date(a.date)).forEach(order => {
                const row = tbody.insertRow();
                const date = new Date(order.date);
                const itemsList = order.items.map(item => `${item.product} (${item.quantity})`).join(', ');
                
                row.innerHTML = `
                    <td>#${order.orderNumber}</td>
                    <td>${date.toLocaleDateString()}</td>
                    <td>${order.customerName}</td>
                    <td>${order.customerEmail}</td>
                    <td>${itemsList}</td>
                    <td>Rs ${order.totalAmount}</td>
                    <td><button class="admin-btn" style="font-size: 10px; padding: 4px 8px;" onclick="viewOrderDetails(${order.orderNumber})">View</button></td>
                `;
            });

            updateOrderStats(filteredOrders);
        }

        function updateOrderStats(orders) {
            const statsContainer = document.getElementById('orderStats');
            if (!statsContainer) return;

            const totalOrders = orders.length;
            const totalRevenue = orders.reduce((sum, order) => sum + order.totalAmount, 0);
            const avgOrderValue = totalOrders > 0 ? (totalRevenue / totalOrders).toFixed(2) : 0;
            
            const today = new Date();
            const todayOrders = orders.filter(order => {
                const orderDate = new Date(order.date);
                return orderDate.toDateString() === today.toDateString();
            });
            
            const thisMonth = orders.filter(order => {
                const orderDate = new Date(order.date);
                return orderDate.getMonth() === today.getMonth() && 
                       orderDate.getFullYear() === today.getFullYear();
            });

            statsContainer.innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">${totalOrders}</div>
                    <div class="stat-label">Total Orders</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Rs ${totalRevenue}</div>
                    <div class="stat-label">Total Revenue</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Rs ${avgOrderValue}</div>
                    <div class="stat-label">Avg Order Value</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${todayOrders.length}</div>
                    <div class="stat-label">Today's Orders</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${thisMonth.length}</div>
                    <div class="stat-label">This Month</div>
                </div>
            `;
        }

        function updateAnalytics() {
            const view = document.getElementById('analyticsView')?.value || 'monthly';
            const year = document.getElementById('analyticsYear')?.value;
            
            let filteredOrders = orderData;
            if (year) {
                filteredOrders = orderData.filter(order => new Date(order.date).getFullYear() == year);
            }

            updateAnalyticsStats(filteredOrders);
            updateSalesChart(filteredOrders, view);
            updateProductChart(filteredOrders);
        }

        function updateAnalyticsStats(orders) {
            const statsContainer = document.getElementById('analyticsStats');
            if (!statsContainer) return;

            const totalRevenue = orders.reduce((sum, order) => sum + order.totalAmount, 0);
            const totalOrders = orders.length;
            const avgOrderValue = totalOrders > 0 ? (totalRevenue / totalOrders).toFixed(2) : 0;

            // Product sales
            const productSales = {};
            orders.forEach(order => {
                order.items.forEach(item => {
                    if (!productSales[item.product]) {
                        productSales[item.product] = { quantity: 0, revenue: 0 };
                    }
                    productSales[item.product].quantity += item.quantity;
                    productSales[item.product].revenue += item.total;
                });
            });

            const bestSellingProduct = Object.keys(productSales).reduce((best, product) => 
                !best || productSales[product].quantity > productSales[best].quantity ? product : best, null);

            statsContainer.innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">Rs ${totalRevenue}</div>
                    <div class="stat-label">Total Revenue</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${totalOrders}</div>
                    <div class="stat-label">Total Orders</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Rs ${avgOrderValue}</div>
                    <div class="stat-label">Average Order</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${bestSellingProduct || 'None'}</div>
                    <div class="stat-label">Best Selling</div>
                </div>
            `;
        }

        let salesChart = null;
        let productChart = null;

        function updateSalesChart(orders, view) {
            const ctx = document.getElementById('salesChart');
            if (!ctx) return;

            if (salesChart) {
                salesChart.destroy();
            }

            let labels = [];
            let data = [];

            if (view === 'monthly') {
                const monthlyData = {};
                orders.forEach(order => {
                    const date = new Date(order.date);
                    const key = `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}`;
                    if (!monthlyData[key]) monthlyData[key] = 0;
                    monthlyData[key] += order.totalAmount;
                });

                labels = Object.keys(monthlyData).sort();
                data = labels.map(label => monthlyData[label]);
            } else {
                const yearlyData = {};
                orders.forEach(order => {
                    const year = new Date(order.date).getFullYear();
                    if (!yearlyData[year]) yearlyData[year] = 0;
                    yearlyData[year] += order.totalAmount;
                });

                labels = Object.keys(yearlyData).sort();
                data = labels.map(label => yearlyData[label]);
            }

            salesChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: `Sales Revenue (${view === 'monthly' ? 'Monthly' : 'Yearly'})`,
                        data: data,
                        borderColor: '#4CAF50',
                        backgroundColor: 'rgba(76, 175, 80, 0.1)',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: `Sales Trend - ${view === 'monthly' ? 'Monthly' : 'Yearly'}`
                        }
                    }
                }
            });
        }

        function updateProductChart(orders) {
            const ctx = document.getElementById('productChart');
            if (!ctx) return;

            if (productChart) {
                productChart.destroy();
            }

            const productSales = {};
            orders.forEach(order => {
                order.items.forEach(item => {
                    if (!productSales[item.product]) {
                        productSales[item.product] = 0;
                    }
                    productSales[item.product] += item.total;
                });
            });

            const labels = Object.keys(productSales);
            const data = Object.values(productSales);

            productChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0',
                            '#9966FF', '#FF9F40', '#FF6384', '#C9CBCF'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Revenue by Product'
                        }
                    }
                }
            });
        }

        function viewOrderDetails(orderNumber) {
            const order = orderData.find(o => o.orderNumber === orderNumber);
            if (!order) return;

            const date = new Date(order.date);
            let itemsHtml = '';
            order.items.forEach(item => {
                itemsHtml += `<tr>
                    <td>${item.product}</td>
                    <td>${item.quantity}</td>
                    <td>Rs ${item.price}</td>
                    <td>Rs ${item.total}</td>
                </tr>`;
            });

            const detailHtml = `
                <div style="padding: 20px;">
                    <h3>Order Details - #${order.orderNumber}</h3>
                    <p><strong>Date:</strong> ${date.toLocaleDateString()} ${date.toLocaleTimeString()}</p>
                    <p><strong>Customer:</strong> ${order.customerName}</p>
                    <p><strong>Email:</strong> ${order.customerEmail}</p>
                    
                    <h4>Items Ordered:</h4>
                    <table class="order-table">
                        <thead>
                            <tr><th>Product</th><th>Quantity</th><th>Price</th><th>Total</th></tr>
                        </thead>
                        <tbody>${itemsHtml}</tbody>
                    </table>
                    
                    <p style="font-size: 16px; font-weight: bold; margin-top: 15px;">
                        Total Amount: Rs ${order.totalAmount}
                    </p>
                    
                    <button class="admin-btn" onclick="showOrderManagement()">Back to Orders</button>
                    <button class="admin-btn" style="background-color: #f44336;" onclick="deleteOrder(${order.orderNumber})">Delete Order</button>
                </div>
            `;

            document.getElementById('adminContent').innerHTML = detailHtml;
        }

        function deleteOrder(orderNumber) {
            if (confirm('Are you sure you want to delete this order?')) {
                orderData = orderData.filter(order => order.orderNumber !== orderNumber);
                saveOrderData();
                showOrderManagement();
            }
        }

        function clearOrderData() {
            if (confirm('Are you sure you want to clear all order data? This cannot be undone!')) {
                orderData = [];
                orderCounter = 1;
                saveOrderData();
                showOrderManagement();
            }
        }

        async function savePrices() {
            const savePricesBtn = document.getElementById('savePricesBtn');
            const statusDiv = document.getElementById('updateStatus');

            for (let item in prices) {
                const newPrice = parseFloat(document.getElementById(`price_${item}`).value);
                if (!isNaN(newPrice) && newPrice >= 0) {
                    prices[item] = newPrice;
                }
            }

            updateProductList();
            updatePriceList();
            calculateTotal();

            savePricesBtn.disabled = true;
            savePricesBtn.innerHTML = '<div class="loading-spinner"></div>Updating...';
            
            if (firebaseInitialized && database) {
                try {
                    await database.ref('settings/prices').set(prices);
                    statusDiv.innerHTML = '<div class="status-box status-success">✅ Prices updated successfully! Changes synced across all devices.</div>';
                    showFirebaseStatus("Prices updated", false);
                } catch (error) {
                    console.error('Failed to save prices to Firebase:', error);
                    statusDiv.innerHTML = '<div class="status-box status-error">❌ Failed to sync prices to Firebase</div>';
                    showFirebaseStatus("Price sync failed", true);
                }
            } else {
                statusDiv.innerHTML = '<div class="status-box status-info">Prices updated locally. Configure Firebase for sync across devices.</div>';
            }

            savePricesBtn.disabled = false;
            savePricesBtn.innerHTML = 'Update Prices';
        }

        function changePassword() {
            const currentPassword = document.getElementById('currentPassword')?.value;
            const newPassword = document.getElementById('newPassword')?.value;
            const confirmPassword = document.getElementById('confirmPassword')?.value;

            const errorElement = document.getElementById('passwordError');
            const successElement = document.getElementById('passwordSuccess');

            errorElement.style.display = 'none';
            successElement.style.display = 'none';

            if (currentPassword !== adminPassword) {
                errorElement.textContent = 'Current password is incorrect!';
                errorElement.style.display = 'block';
                return;
            }

            if (newPassword.length < 6) {
                errorElement.textContent = 'New password must be at least 6 characters long!';
                errorElement.style.display = 'block';
                return;
            }

            if (newPassword !== confirmPassword) {
                errorElement.textContent = 'New passwords do not match!';
                errorElement.style.display = 'block';
                return;
            }

            adminPassword = newPassword;

            successElement.textContent = 'Password changed successfully!';
            successElement.style.display = 'block';

            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
        }

        window.onload = async function() {
            initializeFirebase();
            await initializeOrderData();
            updateProductList();
            updatePriceList();
            showProductFields();
            fadeInOnScroll();
        };
    </script>
</head>
<body>
    <header>
        <h1>AJC Group of Company</h1>
    </header>
    <nav>
        <a href="#home">Home</a>
        <a href="#order">Order</a>
        <a href="#about">About Us</a>
        <a href="#feedback">Feedback</a>
    </nav>

    <section id="home" class="fade-in">
        <h2>Welcome to AJC Group of Company</h2>
        <p>Welcome to AJC Group of Company, where we bring fresh farm products directly to your doorstep. Founded in 2023 by Antony Asher and Joseph Johann, we are committed to delivering high-quality, sustainable, and affordable produce. Whether you're looking for fresh vegetables, fruits, or services from our diverse sectors like Motor Works and Paint Shop, we're here to meet your needs. Join us on our journey to provide the best for you and your family!</p>
    </section>

    <div class="price-list">
        <h2>PRICE LIST AND QUANTITY</h2>
        <h3>Chilly = 2rs/per peice</h3>
        <h3>Tomato = 5rs/per piece</h3>
        <h3>Capsicum = 20rs/per piece</h3>
        <h3>Cabbage = 50rs/per piece</h3>
        <h3>Ladies finger = 2rs/per piece</h3>
        <h3>Cauliflower = 50rs/per piece</h3>
    </div>

    <section id="order" class="fade-in">
        <h2>Order</h2>
        <div class="order-form">
            <h3>Place Your Order</h3>
            <form onsubmit="return sendEmail();">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>

                <label for="itemCount">How many items do you need?</label>
                <select id="itemCount" name="itemCount" onchange="showProductFields()">
                    <option value="1">1 item</option>
                    <option value="2">2 items</option>
                    <option value="3">3 items</option>
                    <option value="4">4 items</option>
                    <option value="5">5 items</option>
                </select>

                <div id="productFieldset1" class="product-fieldset" style="display: block;">
                    <label for="product1">Product 1:</label>
                    <select id="product1" name="product1" onchange="updateProductImage(1)">
                        <option value="">Select Product</option>
                    </select>
                    <label for="quantity1">Quantity:</label>
                    <input type="number" id="quantity1" name="quantity1" min="1" onchange="calculateTotal()">
                    <img id="productImage1" class="product-image" style="display:none;" alt="Product Image">
                </div>

                <div id="productFieldset2" class="product-fieldset" style="display: none;">
                    <label for="product2">Product 2:</label>
                    <select id="product2" name="product2" onchange="updateProductImage(2)">
                        <option value="">Select Product</option>
                    </select>
                    <label for="quantity2">Quantity:</label>
                    <input type="number" id="quantity2" name="quantity2" min="1" onchange="calculateTotal()">
                    <img id="productImage2" class="product-image" style="display:none;" alt="Product Image">
                </div>

                <div id="productFieldset3" class="product-fieldset" style="display: none;">
                    <label for="product3">Product 3:</label>
                    <select id="product3" name="product3" onchange="updateProductImage(3)">
                        <option value="">Select Product</option>
                    </select>
                    <label for="quantity3">Quantity:</label>
                    <input type="number" id="quantity3" name="quantity3" min="1" onchange="calculateTotal()">
                    <img id="productImage3" class="product-image" style="display:none;" alt="Product Image">
                </div>

                <div id="productFieldset4" class="product-fieldset" style="display: none;">
                    <label for="product4">Product 4:</label>
                    <select id="product4" name="product4" onchange="updateProductImage(4)">
                        <option value="">Select Product</option>
                    </select>
                    <label for="quantity4">Quantity:</label>
                    <input type="number" id="quantity4" name="quantity4" min="1" onchange="calculateTotal()">
                    <img id="productImage4" class="product-image" style="display:none;" alt="Product Image">
                </div>

                <div id="productFieldset5" class="product-fieldset" style="display: none;">
                    <label for="product5">Product 5:</label>
                    <select id="product5" name="product5" onchange="updateProductImage(5)">
                        <option value="">Select Product</option>
                    </select>
                    <label for="quantity5">Quantity:</label>
                    <input type="number" id="quantity5" name="quantity5" min="1" onchange="calculateTotal()">
                    <img id="productImage5" class="product-image" style="display:none;" alt="Product Image">
                </div>

                <div class="total">
                    <span id="totalCost">Total Cost: Rs 0</span>
                </div>

                <input type="submit" value="Submit Order">
            </form>
        </div>
    </section>

    <section id="about" class="fade-in">
        <div class="about-section">
            <h1>About Us</h1>
            <p>AJC Group of Company, founded in 2023 by CEO and Founder Antony Asher and COO and Co-Founder Joseph Johann, is committed to delivering high-quality farm-fresh produce directly to your doorstep. Our focus is on providing a wide variety of vegetables, fruits, and other farm products with an emphasis on freshness, sustainability, and affordability.</p>

            <p>In addition to our core offerings in farm products, AJC Group has diversified into several other sectors, including Motor Works, Paint Shop, and more, ensuring a comprehensive range of services to meet the needs of our customers.</p>

            <p>Our mission is to make healthy and fresh food easily accessible to everyone while supporting local farmers and communities, and we are constantly expanding to offer the best products and services across multiple industries.</p>

            <h2>OUR TEAM</h2>
            <h3>CEO [CHIEF EXECUTIVE OFFICER]</h3>
            <h4>Mr Antony Asher [FOUNDER OF COMPANY]</h4>

            <h3>COO [CHIEF OPERATIONS OFFICER]</h3>
            <h4>Mr Joseph Johann [CO-FOUNDER]</h4>

            <h2>FARM</h2>
            <img src="static/images/ajc.jpg" alt="AJC Farm">
            <img src="static/images/banana.jpg" alt="Banana Farm">
            <img src="static/images/tomatop.jpg" alt="Tomato Plants">
            <img src="static/images/chillyp.jpg" alt="Chilly Plants">
            <img src="static/images/chillyp2.jpg" alt="Chilly Plants 2">
            <img src="cabbagep.jpg" alt="Cabbage 2">
            <p>Fresh and quality vegetables since 2023.</p>

            <h2>OUR AIM</h2>
            <h4>Our aim is to ensure good and quality vegetables from our farm to nurture healthy generation</h4>

            <h2>CONTACT US</h2>
            <h4>Mob: 9745607925</h4>
            <h4>Gmail: ajcgroupofcompany047@gmail.com</h4>
        </div>
    </section>

    <section id="feedback" class="fade-in">
        <h2>Feedback</h2>
        <div class="feedback-form">
            <form onsubmit="return sendFeedbackEmail();">
                <label for="feedbackName">Your Name:</label>
                <input type="text" id="feedbackName" name="feedbackName" required>

                <label for="feedbackEmail">Your Email:</label>
                <input type="email" id="feedbackEmail" name="feedbackEmail" required>

                <label for="senderGmail">Your Gmail:</label>
                <input type="email" id="senderGmail" name="senderGmail" required>

                <label for="feedbackMessage">Your Feedback:</label>
                <textarea id="feedbackMessage" name="feedbackMessage" rows="5" required></textarea>

                <input type="submit" value="Submit Feedback">
            </form>
        </div>
    </section>

    <footer>
        <p>© 2025 AJC Group of Company. All rights reserved.</p>
    </footer>

    <!-- Firebase Status Indicator -->
    <div id="firebaseStatus" class="firebase-status"></div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-panel">
        <div class="admin-content" id="adminContent">
            <!-- Admin content will be dynamically loaded here -->
        </div>
    </div>

    <!-- Floating Admin Button -->
    <button class="admin-floating-btn" onclick="showAdminPanel()" title="Admin Login">⚙️</button>

</body>
</html>



























